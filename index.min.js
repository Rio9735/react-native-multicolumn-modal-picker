"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.styles=exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_picker=require("@react-native-picker/picker"),_reactNative=require("react-native"),_excluded=["acceptButtonText","acceptButtonTextStyle","bgColor","cancelButtonBgColor","cancelButtonText","cancelButtonTextStyle","column1","column2","column3","extraView","itemStyle","onAccept","onCancel","onClose","onValueChange1","onValueChange2","onValueChange3","rightInfo","rightInfoTextStyle","searchBar","searchBoxStyle","searchPlaceholder","searchPlaceholderTextColor","searchTextStyle","selectedValue1","selectedValue2","selectedValue3","selectionHighlightColor","showActionButtons","showCancelButton","title","titleStyle","visible"];function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=_objectWithoutPropertiesLoose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var MultiColumnModalPicker=function(_ref){var onValueChanges,acceptButtonText=_ref.acceptButtonText,acceptButtonTextStyle=_ref.acceptButtonTextStyle,bgColor=_ref.bgColor,cancelButtonBgColor=_ref.cancelButtonBgColor,cancelButtonText=_ref.cancelButtonText,cancelButtonTextStyle=_ref.cancelButtonTextStyle,column1=_ref.column1,column2=_ref.column2,column3=_ref.column3,extraView=_ref.extraView,itemStyle=_ref.itemStyle,onAccept=_ref.onAccept,onCancel=_ref.onCancel,onClose=_ref.onClose,onValueChange1=_ref.onValueChange1,onValueChange2=_ref.onValueChange2,onValueChange3=_ref.onValueChange3,rightInfo=_ref.rightInfo,rightInfoTextStyle=_ref.rightInfoTextStyle,searchBar=_ref.searchBar,searchBoxStyle=_ref.searchBoxStyle,searchPlaceholder=_ref.searchPlaceholder,searchPlaceholderTextColor=_ref.searchPlaceholderTextColor,searchTextStyle=_ref.searchTextStyle,selectedValue1=_ref.selectedValue1,selectedValue2=_ref.selectedValue2,selectedValue3=_ref.selectedValue3,selectionHighlightColor=_ref.selectionHighlightColor,showActionButtons=_ref.showActionButtons,showCancelButton=_ref.showCancelButton,title=_ref.title,titleStyle=_ref.titleStyle,visible=_ref.visible,rest=_objectWithoutProperties(_ref,_excluded);if("ios"===_reactNative.Platform.OS){var searchRef=(0,_react.useRef)(),windowHeight=_reactNative.Dimensions.get("window").height,themeMode=_reactNative.Appearance.getColorScheme(),animation=_slicedToArray((0,_react.useState)(new _reactNative.Animated.Value(0)),1)[0],_useState4=_slicedToArray((0,_react.useState)(0),2),pickerHeight=_useState4[0],setPickerHeight=_useState4[1],_useState6=_slicedToArray((0,_react.useState)(""),2),searchValue=_useState6[0],setSearchValue=_useState6[1],_useState8=_slicedToArray((0,_react.useState)(!1),2),acceptIsPressed=_useState8[0],setAcceptIsPressed=_useState8[1],_useState10=_slicedToArray((0,_react.useState)(!1),2),cancelIsPressed=_useState10[0],setCancelIsPressed=_useState10[1],_useState12=_slicedToArray((0,_react.useState)(!1),2),isSearchBarFocus=_useState12[0],setIsSearchBarFocus=_useState12[1],_useState14=_slicedToArray((0,_react.useState)(searchBar),2),showSearchBar=_useState14[0],setShowSearchBar=_useState14[1],columns=[column1,column2,column3],selectedValues=[selectedValue1,selectedValue2,selectedValue3],_useState16=_slicedToArray((0,_react.useState)([null,null,null]),2),previousValue=_useState16[0],setPreviousValue=_useState16[1],unrecognizedProps=(0,_react.useMemo)((function(){return Object.keys(rest)}),[JSON.stringify(rest)]);(0,_react.useEffect)((function(){if(__DEV__&&unrecognizedProps.length>0){var isPlural=unrecognizedProps.length>1;console.warn("The propert".concat(isPlural?"ies":"y",' "').concat(unrecognizedProps.join(", "),'" ').concat(isPlural?"are":"is"," not recognized by MultiColumnModalPicker. \nTips: \n1. Check the spelling of the propert").concat(isPlural?"ies":"y",". \n2. The following properties were removed in version 1.0.4 of react-native-multicolumn-modal-picker: \n ['acceptButtonTextColor', 'allItemsColor', 'cancelButtonTextColor', 'col1ItemsColor', 'col2ItemsColor', 'col3ItemsColor','rightInfoSize', 'rightInfoTextColor', 'showOnTop', 'titleComponent', 'theme'] \n3. For more information, check the documentation at: https://github.com/Rio9735/react-native-multicolumn-modal-picker"))}}),[unrecognizedProps]),(0,_react.useEffect)((function(){setShowSearchBar(!(!searchBar||column1&&column2||column2&&column3||column1&&column3))}),[searchBar,column2,column3]),(0,_react.useEffect)((function(){visible&&setPreviousValue([selectedValue1||null,selectedValue2||null,selectedValue3||null])}),[visible]);var onCloseHandle=function(){try{onClose()}catch(e){__DEV__&&console.error("The onClose property is required in the react-native-multicolumn-modal-picker component. For more details, please refer to the documentation of react-native-multicolumn-modal-picker: https://github.com/Rio9735/react-native-multicolumn-modal-picker",e)}},handleCancel=function(){showSearchBar&&closeSearch(),onValueChange1(previousValue[0]),onValueChange2&&onValueChange2(previousValue[1]),onValueChange3&&onValueChange3(previousValue[2]),onCloseHandle(),onCancel&&onCancel()},handleAccept=function(){showSearchBar&&closeSearch(),onAccept&&onAccept(),onCloseHandle()};(0,_react.useEffect)((function(){_reactNative.Animated.timing(animation,{toValue:isSearchBarFocus?windowHeight-pickerHeight-50:0,duration:isSearchBarFocus?250:350,useNativeDriver:!1}).start()}),[isSearchBarFocus]);var ignoreSpecialChars=function(str){return str.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},closeSearch=function(){var _searchRef$current;(null===(_searchRef$current=searchRef.current)||void 0===_searchRef$current?void 0:_searchRef$current.blur)&&searchRef.current.blur(),setIsSearchBarFocus(!1),setSearchValue("")};return _react.default.createElement(_reactNative.Modal,{animationType:"slide",transparent:!0,visible:visible,onRequestClose:handleCancel},_react.default.createElement(_reactNative.Pressable,{style:{flex:1},onPress:handleAccept}),_react.default.createElement(_reactNative.Animated.View,{onLayout:0===pickerHeight&&function(event){var newHeight=event.nativeEvent.layout.height;setPickerHeight(newHeight)},style:[styles.modalMainContainer,{bottom:animation}]},_react.default.createElement(_reactNative.View,{style:[styles.pickerWrapperStyle,{backgroundColor:"light"===themeMode?"#F6F6F6":"#333333"}]},showActionButtons&&_react.default.createElement(_reactNative.View,{style:[styles.buttonsContainer,{backgroundColor:bgColor||("light"===themeMode?"#F6F6F6":"#333333"),borderBottomColor:"light"===themeMode?"#BBBBBB":"#717171"}]},_react.default.createElement(_reactNative.Pressable,{style:{flex:1,paddingLeft:20},onPress:function(){setCancelIsPressed(!1),handleCancel()},onPressIn:function(){return setCancelIsPressed(!0)},onPressOut:function(){return setCancelIsPressed(!1)}},_react.default.createElement(_reactNative.Text,{style:[styles.mainText,{color:cancelIsPressed?"#D84D46":"light"===themeMode?"#555555":"#FFFFFF"},cancelButtonTextStyle&&cancelButtonTextStyle]},cancelButtonText||"Cancel")),_react.default.createElement(_reactNative.Pressable,{style:styles.acceptBtn,onPress:function(){setAcceptIsPressed(!1),handleAccept()},onPressIn:function(){return setAcceptIsPressed(!0)},onPressOut:function(){return setAcceptIsPressed(!1)}},_react.default.createElement(_reactNative.Text,{style:[styles.mainText,{color:acceptIsPressed?"#0093D4":"light"===themeMode?"#444444":"#FFFFFF"},acceptButtonTextStyle&&acceptButtonTextStyle]},acceptButtonText||"Accept"))),title&&_react.default.createElement(_reactNative.View,{style:[styles.titleView,{backgroundColor:bgColor||("light"===themeMode?"#F6F6F6":"#333333"),borderTopStartRadius:showActionButtons?0:10,borderTopEndRadius:showActionButtons?0:10,borderBottomColor:"light"===themeMode?"#BBBBBB":"#717171"}]},_react.default.createElement(_reactNative.Text,{style:[styles.titleText,{color:"light"===themeMode?"#888888":"#B2B2B2"},titleStyle&&titleStyle]},title)),_react.default.createElement(_reactNative.View,{style:[styles.pickerContainer,{backgroundColor:bgColor||("light"===themeMode?"#F6F6F6":"#333333"),borderTopStartRadius:title||showCancelButton&&title||showActionButtons?0:10,borderTopEndRadius:title||showCancelButton&&title||showActionButtons?0:10}]},showSearchBar&&_react.default.createElement(_reactNative.View,{style:{alignItems:"center",justifyContent:"center"}},_react.default.createElement(_reactNative.View,{style:[styles.searchBar,{backgroundColor:"dark"===themeMode?"rgba(222,222,222,0.1)":"rgba(1,1,1,0.1)"},searchBoxStyle&&searchBoxStyle]},_react.default.createElement(_reactNative.TextInput,{style:[styles.searchInput,{color:"dark"===themeMode?"#FFFFFF":"#222222"},searchTextStyle&&searchTextStyle],ref:searchRef,maxLength:30,placeholderTextColor:searchPlaceholderTextColor||"grey",placeholder:searchPlaceholder||"Search here",onFocus:function(){return setIsSearchBarFocus(!0)},spellCheck:!1,value:searchValue,onChangeText:function(text){try{if(setSearchValue(text),""===text)onValueChange1(previousValue[0]);else{var exactMatch=column1.find((function(item){return item.value===text}));if(exactMatch)onValueChange1(exactMatch.value);else{var filteredData=column1.filter((function(item){return ignoreSpecialChars(item.label.toLowerCase()).includes(ignoreSpecialChars(text.toLowerCase()))||item.value.includes(text)}));filteredData.length>0?(filteredData.sort((function(a,b){return ignoreSpecialChars(a.label.toLowerCase()).indexOf(ignoreSpecialChars(text.toLowerCase()))-ignoreSpecialChars(b.label.toLowerCase()).indexOf(ignoreSpecialChars(text.toLowerCase()))}))||(a.value.indexOf(text),b.value.indexOf(text)),onValueChange1(filteredData[0].value)):onValueChange1(previousValue[0])}}}catch(error){__DEV__&&console.error("An error occurred during the search: ",error)}},onBlur:closeSearch}),searchValue.length>0&&_react.default.createElement(_reactNative.TouchableOpacity,{style:[styles.searchClearBtn,{backgroundColor:"dark"===themeMode?"rgba(255,255,255,0.5)":"rgba(1,1,1,0.5)"}],onPress:function(){setSearchValue("")}},_react.default.createElement(_reactNative.Text,{style:{fontSize:14,fontWeight:"bold",color:"dark"===themeMode?"rgba(1,1,1,0.8)":"rgba(255,255,255,0.8)"}},"X")))),_react.default.createElement(_reactNative.View,{style:{flexDirection:"row"}},_react.default.createElement(_reactNative.View,{style:[styles.selectionHighlight,{backgroundColor:selectionHighlightColor||"#555555"}]}),(extraView||rightInfo)&&_react.default.createElement(_reactNative.View,{style:rightInfo?null!==extraView?{minWidth:extraView}:{flex:1}:{minWidth:extraView}}),(onValueChanges=[onValueChange1,onValueChange2,onValueChange3],columns.map((function(column,index){return column?_react.default.createElement(_picker.Picker,{key:index,style:{flex:1},itemStyle:[styles.itemText,{color:"light"===themeMode?"#222222":"#FFFFFF"},itemStyle&&itemStyle],selectionColor:"rgba(255,255,255,0)",selectedValue:selectedValues[index],onValueChange:onValueChanges[index]},column.map((function(item,index){return _react.default.createElement(_picker.Picker.Item,{key:index,label:item.label,value:item.value})}))):null}))),rightInfo&&_react.default.createElement(_reactNative.View,{style:styles.rightInfoContainer},_react.default.createElement(_reactNative.Text,{style:[styles.rightInfoText,{color:"light"===themeMode?"#444444":"#B2B2B2"},rightInfoTextStyle&&rightInfoTextStyle]},rightInfo)),extraView&&_react.default.createElement(_reactNative.View,{style:{minWidth:extraView}})))),showCancelButton&&!showActionButtons&&_react.default.createElement(_reactNative.View,{style:[styles.buttonAltView,{backgroundColor:cancelButtonBgColor||("light"===themeMode?"#F6F6F6":"#333333")}]},_react.default.createElement(_reactNative.Pressable,{style:styles.buttonAlt,onPress:handleCancel},_react.default.createElement(_reactNative.Text,{style:[styles.mainText,{color:"#D84D46"},cancelButtonTextStyle&&cancelButtonTextStyle]},cancelButtonText||"Cancel")))))}__DEV__&&console.warn("Thank you for using react-native-multicolumn-modal-picker! Please note that it is currently only available for iOS. I am considering making it compatible with Android as well. Your opinion is important to me! If you find it useful and would like to see Android optimization, please vote here: [https://docs.google.com/forms/d/e/1FAIpQLSd3CWTSYT7DJcdCAMP_pE5IG8DrHc0QE2q42jden6JhgyP2PA/viewform?usp=sf_link]. Stay tuned for upcoming updates!")},styles=exports.styles=_reactNative.StyleSheet.create({mainText:{fontSize:18,color:"#0093D4"},titleText:{fontSize:15},itemText:{fontSize:18},rightInfoContainer:{minWidth:100,justifyContent:"center",alignItems:"flex-end",paddingRight:30},rightInfoText:{fontSize:18},modalMainContainer:{position:"absolute",width:"100%",marginBottom:10,paddingHorizontal:10},pickerWrapperStyle:{borderRadius:12,shadowColor:"#000",shadowOffset:{width:0,height:0},shadowOpacity:.2,shadowRadius:1,elevation:1},buttonsContainer:{minHeight:55,flexDirection:"row",alignItems:"center",borderTopStartRadius:10,borderTopEndRadius:10,borderBottomWidth:.5},acceptBtn:{flex:1,paddingRight:20,alignItems:"flex-end"},buttonAltView:{minHeight:55,borderRadius:10,marginTop:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:1,elevation:1},buttonAlt:{flex:1,justifyContent:"center",alignItems:"center"},titleView:{alignItems:"center",justifyContent:"center",padding:5,borderBottomWidth:.5},searchBar:{flexDirection:"row",alignItems:"center",width:"90%",marginTop:20,paddingHorizontal:15,borderRadius:10},searchInput:{flex:1,minHeight:40,fontSize:18},searchClearBtn:{marginLeft:5,minHeight:20,minWidth:20,alignItems:"center",justifyContent:"center",borderRadius:100},pickerContainer:{borderBottomStartRadius:10,borderBottomEndRadius:10},selectionHighlight:{width:"94%",opacity:.3,minHeight:40,top:"50%",left:"3%",transform:[{translateY:-20}],borderRadius:10,position:"absolute"}}),_default=exports.default=MultiColumnModalPicker;